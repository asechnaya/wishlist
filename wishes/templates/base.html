<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Wishes{% endblock %}</title>

  {% block head_meta %}{% endblock %}
  <script src="https://cdn.tailwindcss.com"></script>
  {% block head_css %}{% endblock %}
  {% block extra_head %}{% endblock %}
</head>
<body class="{% block body_class %}bg-gray-100 text-gray-800{% endblock %}">
  <a href="#main-content"
     class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 bg-white text-blue-700 border border-blue-200 rounded px-3 py-2 shadow">
    Skip to content
  </a>

  <header class="bg-white/80 backdrop-blur border-b border-gray-200">
    <div class="{% block header_container_classes %}container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4{% endblock %}">
      {% block header %}
      <div class="flex items-center justify-between gap-4">
        <a href="{% url 'main_feed' %}" class="text-lg font-bold text-gray-900">Wishes</a>
        <nav class="flex items-center gap-4 text-sm">
          <a href="{% url 'wish_list' %}" class="text-gray-700 hover:text-gray-900">My Wishes</a>
          <a href="{% url 'add_wish' %}" class="text-gray-700 hover:text-gray-900">Add</a>
          <a href="{% url 'profile' %}" class="text-gray-700 hover:text-gray-900">Profile</a>
        </nav>
      </div>
      {% endblock %}
    </div>
  </header>

  <main id="main-content" class="{% block main_container_classes %}container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-8 sm:pt-10 md:pt-12 pb-12{% endblock %}">
    {% block messages %}
      {% if messages %}
        <div class="mb-6 space-y-2">
          {% for message in messages %}
            {% with mt=message.tags %}
              <div role="alert"
                   class="rounded-md px-4 py-3 border
                     {% if 'error' in mt %}bg-red-50 border-red-200 text-red-800
                     {% elif 'warning' in mt or 'warn' in mt %}bg-amber-50 border-amber-200 text-amber-900
                     {% elif 'success' in mt %}bg-emerald-50 border-emerald-200 text-emerald-900
                     {% elif 'info' in mt %}bg-blue-50 border-blue-200 text-blue-900
                     {% else %}bg-gray-50 border-gray-200 text-gray-800{% endif %}">
                {{ message }}
              </div>
            {% endwith %}
          {% endfor %}
        </div>
      {% endif %}
    {% endblock %}

    {% block content %}
  <div class="flex items-center justify-between mb-8 flex-wrap gap-4">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 leading-tight">
      {{ owner.username }}â€™s Public Wishlist
    </h1>
  </div>

  {% if wishes %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for wish in wishes %}
        <a href="{% url 'public_wish_detail' owner.username wish.pk %}" class="block bg-white rounded-xl shadow border border-gray-200 overflow-hidden hover:shadow-md transition">
          {% if wish.image %}
            <img src="{{ wish.image.url }}" alt="{{ wish.title }}" class="w-full h-48 object-cover">
          {% endif %}
          <div class="p-4">
            <h2 class="text-lg font-semibold text-gray-900">{{ wish.title }}</h2>
            {% if wish.price %}<p class="text-gray-600 mt-1">{{ wish.price }}</p>{% endif %}
            {% if wish.tags.all %}
              <div class="mt-3 flex flex-wrap gap-2">
                {% for tag in wish.tags.all %}
                  <span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">{{ tag.name }}</span>
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-600">No public wishes yet.</p>
  {% endif %}
{% endblock %}
  </main>

  <footer class="bg-white border-t border-gray-200">
    <div class="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 text-sm text-gray-500">
      {% block footer %}
      <p>&copy; {% now "Y" %} Wishes</p>
      {% endblock %}
    </div>
  </footer>

  {% block extra_scripts %}{% endblock %}
</body>
</html>