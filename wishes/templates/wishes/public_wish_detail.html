<!-- wishes/templates/wishes/wish_list.html -->
{% extends 'base.html' %}

{% block title %}My Private List{% endblock %}

{% block content %}
    <h2 class="text-4xl font-extrabold text-gray-900 mb-6 border-b-2 pb-2">My Private List</h2>
    <p class="mb-8">
        <a href="{% url 'add_wish' %}" class="button button-primary">Add New Wish</a>
    </p>

    {% if active_wishes %}
        <h3 class="text-2xl font-bold text-gray-800 mt-8 mb-4 border-b-2 pb-2">Active Wishes</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            {% for wish in active_wishes %}
                <div class="wish-card">
                    <a href="{% url 'wish_detail' wish.pk %}">
                        <div class="wish-card-image-container">
                            {% if wish.image %}
                                <img src="{{ wish.image.url }}" alt="{{ wish.title }}" class="wish-card-image">
                            {% else %}
                                <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500 text-lg">
                                    <span>No Image</span>
                                </div>
                            {% endif %}
                        </div>
                    </a>
                    <div class="wish-card-content">
                        <div>
                            <h3 class="leading-tight mb-2">
                                <a href="{% url 'wish_detail' wish.pk %}" class="hover:text-indigo-600 transition-colors duration-200">{{ wish.title }}</a>
                            </h3>
                            <p class="wish-card-user">
                                By: <a href="{% url 'public_wish_list' wish.user.username %}" class="text-green-600 hover:underline transition-colors duration-200 font-medium">{{ wish.user.username }}</a>
                            </p>
                        </div>
                        <div class="mt-4">
                            <p class="wish-card-price mb-2">
                                {% if wish.price %}{{ wish.price }}{% else %}N/A{% endif %}
                            </p>
                            {% if wish.tags.all %}
                                <div class="flex flex-wrap gap-2">
                                    {% for tag in wish.tags.all %}
                                        <a href="{% url 'wish_list' %}?tag={{ tag.name }}" class="tag-link">{{ tag.name }}</a>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="col-span-full text-center text-gray-500 text-lg py-10">You have no active wishes yet. <a href="{% url 'add_wish' %}" class="text-indigo-600 hover:underline">Add one!</a></p>
    {% endif %}

    {% if completed_wishes %}
        <h3 class="text-2xl font-bold text-gray-800 mt-12 mb-4 border-b-2 pb-2">Completed Wishes</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 opacity-70">
            {% for wish in completed_wishes %}
                <div class="wish-card">
                    <a href="{% url 'wish_detail' wish.pk %}">
                        <div class="wish-card-image-container">
                            {% if wish.image %}
                                <img src="{{ wish.image.url }}" alt="{{ wish.title }}" class="wish-card-image">
                            {% else %}
                                <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-500 text-lg">
                                    <span>No Image</span>
                                </div>
                            {% endif %}
                        </div>
                    </a>
                    <div class="wish-card-content">
                        <div>
                            <h3 class="leading-tight mb-2 line-through">
                                <a href="{% url 'wish_detail' wish.pk %}" class="hover:text-indigo-600 transition-colors duration-200">{{ wish.title }}</a>
                            </h3>
                            <p class="wish-card-user">
                                By: <a href="{% url 'public_wish_list' wish.user.username %}" class="text-green-600 hover:underline transition-colors duration-200 font-medium">{{ wish.user.username }}</a>
                            </p>
                        </div>
                        <div class="mt-4">
                            <p class="wish-card-price mb-2">
                                {% if wish.price %}{{ wish.price }}{% else %}N/A{% endif %}
                            </p>
                            {% if wish.tags.all %}
                                <div class="flex flex-wrap gap-2">
                                    {% for tag in wish.tags.all %}
                                        <a href="{% url 'wish_list' %}?tag={{ tag.name }}" class="tag-link">{{ tag.name }}</a>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

{% endblock %}
